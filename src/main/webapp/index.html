<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>BRAVA - Breeding API Validator</title>
  <meta name="description" content="Breeding API Validator">
  <meta name="author" content="IPK Gatersleben">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/footable.standalone.min.css">
  <link rel="stylesheet" href="css/styles.css?v=1.0">
</head>
<body>
  <div class="wrapper">
    <div id="page-wrapper" class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col-xl-10">
          <div class="jumbotron py-4 clearfix">
            <h1 class="text-center display-3">
              <a href="./" class="link-unstyled">BRAVA</a>
            </h1>
            <p class="text-center lead"><a href="http://www.brapi.org">Breeding API</a> (BrAPI) Validator</p>
            <p class="text-center">BRAVA is a tool designed to help developers test servers that comply with the <a href="https://brapi.docs.apiary.io/">BrAPI specifications</a> (v1.2).</p>
            <button class="btn btn-sm btn-link float-right" data-toggle="modal" data-target="#helpModal">How does it work?</button>
          </div>
        </div>
      </div>
      <div class="row justify-content-md-center">
        <div class="col-xl-10">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item active">
              <a class="nav-link active" id="testyourown-tab" data-toggle="tab" href="#testyourown" role="tab" aria-controls="testyourown" aria-selected="true">Test your own</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="row justify-content-md-center mt-4">
        <div class="col-xl-10">
          <div class="tab-content" id="myTabContent">
            <div class="tab-pane active" id="testyourown" role="tabpanel" aria-labelledby="testyourown-tab">
              <div class="row">
                <div class="col-xl-7" id="formCol">
                  <div class="card bg-light">
                    <div class="card-header card-default">
                      <span class="card-title"><i class="fa fa-edit"></i> Test a BrAPI server</span>
                    </div>
                    <div class="card-body">
                      <form id="testForm">
                        <div class="form-group">
                          <label for="serverurl">
                            Server URL
                          </label>
                          <input type="url" name="url" id="serverurl" class="form-control font-14" aria-describedby="serverHelp" placeholder="https://test.brapi.org/brapi/v1/" required>
                          <div class="invalid-feedback">Please provide a valid URL.</div>
                          <small id="serverHelp">Enter your own server or test the public servers available in the official BrAPI repository.</small>
                        </div>
                        <div class="form-group">
                          <label for="brapiversion">
                            BrAPI Version
                          </label>
                          <select id="brapiversion" class="form-control" name="brapiversion">
                            <option>v1.0</option>
                            <option selected>v1.1</option>
                          </select>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="strict" name="allowadditional">
                          <label class="form-check-label" for="strict">
                            Strict test (<u data-toggle="tooltip" data-placement="top" title="When checked, the validator will not allow extra fields in every response object. Disabling it might hide legitimate errors such as typos on optional fields.">?</u>)
                          </label>
                        </div>
                        <div class="form-group mt-2">
                          <label for="fullurl">Tested URL<span id="multiURL"></span></label>
                          <br>
                          <div id="fullUrl" class="font-14">
                            <a target="_blank" href="/calls">/calls</a>
                          </div>
                        </div>
                        <div id="statusBar" class="alert alert-danger hidden" role="alert">...</div>
                        <div class="d-flex justify-content-between">
                          <button type="submit" class="btn btn-primary">Test it now! (it may take a few minutes)</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <div id="srResults_1" class="col-xl-5" style="display:none">
                  <div class="card bg-light">
                    <div class="card-header card-default d-flex justify-content-between">
                      <div>Test result:</div>
                      <div>
                        <span id="time_tab_1">
                        </span>
                      </div>
                    </div>
                    <div class="d-flex justify-content-between">
                      <div>
                        <a class="btn btn-sm btn-link" data-toggle="collapse" href=".skipped_test_1" aria-expanded="false" aria-controls="skipped_test_1">
                          <span aria-hidden="true">Toggle tests not present in the resource /calls</span>
                        </a>
                      </div>
                      <div class="pr-3">
                        <small>Median response time: <span id="srTime_1"></span>ms</small>
                      </div>
                    </div>
                    <div class="list-group" id="srList_1"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <div class="footer-text">
          <p class="text-muted my-0">&copy; 2018 | IPK-Gatersleben. Site licensed under the MIT License.</p>
          <p class="text-muted my-0"><small>Last build on ${buildDate} with version ${git.commit.id.abbrev} | Send any issues/requests to the <a target="_blank" href="https://github.com/plantbreeding/IPK-BrAPI-Validator/issues">GitHub Issues Page</a></small></p>
        </div>
        <a href="http://www.ipk-gatersleben.de"><img src="http://www.ipk-gatersleben.de/fileadmin/template/main/images-ipk/ipklogo.png" class="footer-logo"></a>
        <a href="https://www.leibniz-gemeinschaft.de/en/home/"><img src="http://www.ipk-gatersleben.de/fileadmin/template/main/images-ipk/sign01.png" class="footer-logo"></a>
      </div>
    </footer>
    <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">How it works</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p class="card-text">BRAVA calls one or more resources in the tested server and tests the response.</p>
            <p class="card-text">First, the <code>/calls</code> resource is requested. If the response is valid, the list of available calls is parsed.</p>
            <p class="card-text">Following a predefined order, BRAVA requests the available resources. For every resource, the status code, content type and <a href="http://json-schema.org">JSON schema</a> is checked. Each resource has a specific schema defined. This checks the structure, parameter name and parameter types.</p>
            <p class="card-text">For example, the <code>/germplasm-search</code> test requires the response data object to contain a <var>germplasmDbId</var> attribute with a string value, among others.</p>
            <p class="card-text">We created the JSON schemas using the official BrAPI specifications. They are <a href="https://github.com/plantbreeding/IPK-BrAPI-Validator/tree/master/src/main/resources/schemas">available here</a>, feel free to check them and use them in your own tests. They may differ from the official specifications because we update them manually. Let us know of any inconsistencies in the <a href="https://github.com/plantbreeding/IPK-BrAPI-Validator/issues"> issue tracker</a>.</p>

            <p class="card-text">Some tests also make sure the data is consistent across resources. This works by storing a few values from the response. The specific parameters that are saved depend on the test. The server will make a request to other resources using these values as input.</p>
            <p class="card-text">This way you can automatically test some resources that would require manual input for certain parameters.</p>
            <p class="card-text">For example, a call to <code>/markerprofiles</code> could store <var>markerprofileDbId</var>. This value can be used as input for <code>/markerprofiles/{markerprofileDbId}</code>.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Github ribbon -->
  <a href="https://github.com/plantbreeding/IPK-BrAPI-Validator"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
  <!-- /Modal -->
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <script src="js/spin.min.js"></script>
  <script src="js/script.js"></script>
</body>
</html>
<!-- Version: ${git.commit.id.abbrev} -->
